<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Sandbox.jl Documentation · Sandbox.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">Sandbox.jl</span></div><form class="docs-search" action="search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Sandbox.jl Documentation</a><ul class="internal"><li><a class="tocitem" href="#Index"><span>Index</span></a></li><li><a class="tocitem" href="#Types"><span>Types</span></a></li><li><a class="tocitem" href="#Functions"><span>Functions</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Sandbox.jl Documentation</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Sandbox.jl Documentation</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/staticfloat/Sandbox.jl/blob/master/docs/src/index.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Sandbox.jl-Documentation"><a class="docs-heading-anchor" href="#Sandbox.jl-Documentation">Sandbox.jl Documentation</a><a id="Sandbox.jl-Documentation-1"></a><a class="docs-heading-anchor-permalink" href="#Sandbox.jl-Documentation" title="Permalink"></a></h1><p><a href="https://github.com/staticfloat/Sandbox.jl"><code>Sandbox.jl</code></a> provides basic containerization tools for running Linux guests on a variety of platforms.</p><h2 id="Index"><a class="docs-heading-anchor" href="#Index">Index</a><a id="Index-1"></a><a class="docs-heading-anchor-permalink" href="#Index" title="Permalink"></a></h2><ul><li><a href="#Sandbox.SandboxConfig"><code>Sandbox.SandboxConfig</code></a></li><li><a href="#Sandbox.SandboxExecutor"><code>Sandbox.SandboxExecutor</code></a></li><li><a href="#Sandbox.build_docker_image-Tuple{String, Int32, Int32}"><code>Sandbox.build_docker_image</code></a></li><li><a href="#Sandbox.get_kernel_version-Tuple{}"><code>Sandbox.get_kernel_version</code></a></li><li><a href="#Sandbox.getgid-Tuple{}"><code>Sandbox.getgid</code></a></li><li><a href="#Sandbox.getuid-Tuple{}"><code>Sandbox.getuid</code></a></li><li><a href="#Sandbox.is_ecryptfs-Tuple{AbstractString}"><code>Sandbox.is_ecryptfs</code></a></li><li><a href="#Sandbox.max_directory_ctime-Tuple{String}"><code>Sandbox.max_directory_ctime</code></a></li><li><a href="#Sandbox.pull_docker_image"><code>Sandbox.pull_docker_image</code></a></li><li><a href="#Sandbox.uname-Tuple{}"><code>Sandbox.uname</code></a></li><li><a href="#Sandbox.with_executor-Union{Tuple{T}, Tuple{F}, Tuple{F, Type{T}}} where {F&lt;:Function, T&lt;:SandboxExecutor}"><code>Sandbox.with_executor</code></a></li></ul><h2 id="Types"><a class="docs-heading-anchor" href="#Types">Types</a><a id="Types-1"></a><a class="docs-heading-anchor-permalink" href="#Types" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="Sandbox.SandboxConfig" href="#Sandbox.SandboxConfig"><code>Sandbox.SandboxConfig</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">SandboxConfig(read_only_maps, read_write_maps, env)</code></pre><p>Sandbox executors require a configuration to set up the environment properly.</p><ul><li><p><code>read_only_maps</code>: Directories that are mapped into the sandbox as read-only mappings.</p><ul><li>Specified as pairs, e.g. <code>sandbox_path =&gt; host_path</code>.  All paths must be absolute.</li><li>Must always include a mapping for root, e.g. <code>&quot;/&quot; =&gt; rootfs_path</code>.</li></ul></li><li><p><code>read_write_maps</code>: Directories that are mapped into the sandbox as read-write mappings.</p><ul><li>Specified as pairs, e.g. <code>sandbox_path =&gt; host_path</code>.  All paths must be absolute.</li><li>Note that some executors may not show perfect live updates; consistency is guaranteed only after execution is finished.</li></ul></li><li><p><code>env</code>: Dictionary mapping of environment variables that should be set within the sandbox.</p></li><li><p><code>entrypoint</code>: Executable that gets passed the actual command being run.</p><ul><li>This is a path within the sandbox, and must be absolute.</li><li>Defaults to <code>nothing</code>, which causes the command to be executed directly.</li></ul></li><li><p><code>pwd</code>: Set the working directory of the command that will be run.</p><ul><li>This is a path within the sandbox, and must be absolute.</li></ul></li><li><p><code>persist</code>: Tell the executor object to persist changes made to the rootfs.</p><ul><li>This is a boolean value, it is up to interpretation by the executor.</li><li>Persistence is a property of an individual executor and changes live only as long as the executor object itself.</li><li>You cannot transfer persistent changes from one executor to another.</li></ul></li><li><p><code>uid</code> and <code>gid</code>: Numeric user and group identifiers to spawn the sandboxed process as.</p><ul><li>By default, these are both <code>0</code>, signifying <code>root</code> inside the sandbox.</li></ul></li><li><p><code>stdin</code>, <code>stdout</code>, <code>stderr</code>: input/output streams for the sandboxed process.</p><ul><li>Can be any kind of <code>IO</code>, <code>TTY</code>, <code>devnull</code>, etc...</li></ul></li><li><p><code>verbose</code>: Set whether the sandbox construction process should be more or less verbose.</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/staticfloat/Sandbox.jl/blob/5c3d254f9d8e3f0e22564e7bec90a73eeb512b72/src/SandboxConfig.jl#L3-L39">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Sandbox.SandboxExecutor" href="#Sandbox.SandboxExecutor"><code>Sandbox.SandboxExecutor</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">SandboxExecutor</code></pre><p>This represents the base type for all execution backends within this package. Valid concrete subtypes must implement at least the following methods:</p><ul><li><p><code>T()</code>: no-argument constructor to ready an execution engine with all defaults.</p></li><li><p><code>executor_available(::DataType{T})</code>: Checks whether executor type <code>T</code> is available on this system.  For example, <code>UserNamespacesExecutor</code>s are only available on Linux, and even then only on certain kernels.  Availablility checks may run a program to determine whether that executor is actually available.</p></li><li><p><code>build_executor_command(exe::T, config::SandboxConfig, cmd::Cmd)</code>: Builds the <code>Cmd</code> object that, when run, executes the user&#39;s desired command within the given sandbox.  The <code>config</code> object contains all necessary metadata such as shard mappings, environment variables, <code>stdin</code>/<code>stdout</code>/<code>stderr</code> redirection, etc...</p></li><li><p><code>cleanup(exe::T)</code>: Cleans up any persistent data storage that this executor may have built up over the course of its execution.</p></li></ul><p>Note that while you can manually construct and cleanup an executor, it is recommended that users instead make use of the <code>with_executor()</code> convenience function:</p><pre><code class="language-none">with_executor(UnprivilegedUserNamespacesExecutor) do exe
    run(exe, config, ...)
end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/staticfloat/Sandbox.jl/blob/5c3d254f9d8e3f0e22564e7bec90a73eeb512b72/src/Sandbox.jl#L11-L38">source</a></section></article><h2 id="Functions"><a class="docs-heading-anchor" href="#Functions">Functions</a><a id="Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Functions" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="Sandbox.build_docker_image-Tuple{String, Int32, Int32}" href="#Sandbox.build_docker_image-Tuple{String, Int32, Int32}"><code>Sandbox.build_docker_image</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">build_docker_image(root_path::String)</code></pre><p>Docker doesn&#39;t like volume mounts within volume mounts, like we do with <code>sandbox</code>. So we do things &quot;the docker way&quot;, where we construct a rootfs docker image, then mount things on top of that, with no recursive mounting.  We cut down on unnecessary work somewhat by quick-scanning the directory for changes and only rebuilding if changes are detected.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/staticfloat/Sandbox.jl/blob/5c3d254f9d8e3f0e22564e7bec90a73eeb512b72/src/Docker.jl#L75-L83">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Sandbox.get_kernel_version-Tuple{}" href="#Sandbox.get_kernel_version-Tuple{}"><code>Sandbox.get_kernel_version</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">get_kernel_version(;verbose::Bool = false)</code></pre><p>Use <code>uname()</code> to get the kernel version and parse it out as a <code>VersionNumber</code>, returning <code>nothing</code> if parsing fails or this is not <code>Linux</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/staticfloat/Sandbox.jl/blob/5c3d254f9d8e3f0e22564e7bec90a73eeb512b72/src/utils.jl#L121-L126">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Sandbox.getgid-Tuple{}" href="#Sandbox.getgid-Tuple{}"><code>Sandbox.getgid</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">getgid()</code></pre><p>Wrapper around libc&#39;s <code>getuid()</code> function</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/staticfloat/Sandbox.jl/blob/5c3d254f9d8e3f0e22564e7bec90a73eeb512b72/src/utils.jl#L171-L175">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Sandbox.getuid-Tuple{}" href="#Sandbox.getuid-Tuple{}"><code>Sandbox.getuid</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">getuid()</code></pre><p>Wrapper around libc&#39;s <code>getuid()</code> function</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/staticfloat/Sandbox.jl/blob/5c3d254f9d8e3f0e22564e7bec90a73eeb512b72/src/utils.jl#L164-L168">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Sandbox.is_ecryptfs-Tuple{AbstractString}" href="#Sandbox.is_ecryptfs-Tuple{AbstractString}"><code>Sandbox.is_ecryptfs</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">is_ecryptfs(path::AbstractString; verbose::Bool=false)</code></pre><p>Checks to see if the given <code>path</code> (or any parent directory) is placed upon an <code>ecryptfs</code> mount.  This is known not to work on current kernels, see this bug for more details: https://bugzilla.kernel.org/show_bug.cgi?id=197603</p><p>This method returns whether it is encrypted or not, and what mountpoint it used to make that decision.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/staticfloat/Sandbox.jl/blob/5c3d254f9d8e3f0e22564e7bec90a73eeb512b72/src/utils.jl#L17-L26">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Sandbox.max_directory_ctime-Tuple{String}" href="#Sandbox.max_directory_ctime-Tuple{String}"><code>Sandbox.max_directory_ctime</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">max_directory_ctime(prefix::String)</code></pre><p>Takes the <code>stat()</code> of all files in a directory root, keeping the maximum ctime, recursively.  Comparing just this value allows for quick directory change detection.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/staticfloat/Sandbox.jl/blob/5c3d254f9d8e3f0e22564e7bec90a73eeb512b72/src/utils.jl#L1-L6">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Sandbox.pull_docker_image" href="#Sandbox.pull_docker_image"><code>Sandbox.pull_docker_image</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">pull_docker_image(image::String,
                  output_dir::String = &lt;default scratch location&gt;;
                  force::Bool = false)</code></pre><p>Pulls and saves the given image name to the requested output directory.  Useful for pulling down a known good rootfs image from Docker Hub, for future use by Sandbox executors.  If <code>force</code> is set to true, will overwrite a pre-existing directory, otherwise will silently return.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/staticfloat/Sandbox.jl/blob/5c3d254f9d8e3f0e22564e7bec90a73eeb512b72/src/Docker.jl#L188-L197">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Sandbox.uname-Tuple{}" href="#Sandbox.uname-Tuple{}"><code>Sandbox.uname</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">uname()</code></pre><p>On Linux systems, return the strings returned by the <code>uname()</code> function in libc.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/staticfloat/Sandbox.jl/blob/5c3d254f9d8e3f0e22564e7bec90a73eeb512b72/src/utils.jl#L78-L82">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Sandbox.with_executor-Union{Tuple{T}, Tuple{F}, Tuple{F, Type{T}}} where {F&lt;:Function, T&lt;:SandboxExecutor}" href="#Sandbox.with_executor-Union{Tuple{T}, Tuple{F}, Tuple{F, Type{T}}} where {F&lt;:Function, T&lt;:SandboxExecutor}"><code>Sandbox.with_executor</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">with_executor(f::Function, ::Type{&lt;:SandboxExecutor} = preferred_executor(); kwargs...)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/staticfloat/Sandbox.jl/blob/5c3d254f9d8e3f0e22564e7bec90a73eeb512b72/src/Sandbox.jl#L124-L126">source</a></section></article></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Thursday 22 April 2021 22:36">Thursday 22 April 2021</span>. Using Julia version 1.6.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
